@require 'settings/palette.styl'
@require 'components/popover.styl'
@require 'settings/icons.styl'
@require 'settings/breakpoints.styl'
@require 'settings/z-index.styl'
@require 'settings/spaces.styl'

$coz-bar-size=3rem

.upload-queue
    border   .0625rem solid var(--silver)
    border-radius    .25rem
    background-color var(--white)
    display          flex
    flex-direction   column
    max-width 90%
    width    30rem

.upload-queue--popover
    @extend $popover
    position fixed
    bottom   .5rem
    right    1.5rem
    height   13.125rem
    transform        translateY(18.75rem)
    transition       0.5s
    opacity          0
    visibility       hidden

.upload-queue--popover.upload-queue--visible
    opacity    1
    visibility visible
    transform  translate(0)

.upload-queue-header
    background-color var(--paleGrey)
    color            var(--charcoalGrey)
    font-weight      bold
    margin           0
    padding          .5rem 1rem .5rem

    .upload-queue-header-inner
        display flex
        justify-content space-between
        align-items center

    .btn-close
        border 0
        background 0
        margin 0
        padding .4rem 0 .4rem .8rem
        color var(--dodgerBlue)
        text-transform uppercase
        font-size .8rem

progress.upload-queue-progress
    -webkit-appearance none
    -moz-appearance    none
    border     none
    display    block
    width      100%
    height     .125rem
    margin     0

progress.upload-queue-progress::-webkit-progress-bar
    background-color var(--silver)
progress.upload-queue-progress::-webkit-progress-value
    background-color var(--dodgerBlue)
progress.upload-queue-progress::-moz-progress-bar
    background-color var(--dodgerBlue)

.upload-queue-content
    overflow auto

.upload-queue--collapsed
    height 2.5rem

    .upload-queue-content
        visibility none

.upload-queue-list
    flex      1 1 auto
    display   flex
    flex-direction column

.upload-queue-item--error
    background-color var(--chablis)

.upload-queue-item--done
    background-color var(--paleGrey)

.upload-queue-item
    height          3rem
    box-sizing      border-box
    display         flex
    flex-direction  row
    align-items     center
    flex            0 0 auto
    width           100%
    border-bottom   .0625rem solid var(--silver)
    max-width       'calc(100vw - %s)' % 13.75rem

    .item-file
        flex        0 0 85%
        display flex
        align-items center
        padding spacing_values.m
        user-select none
        box-sizing  border-box
        color          var(--charcoalGrey)
        overflow hidden

    .item-ext
        color var(--coolGrey)

    .item-status
        flex       0 0 15%
        text-align center

    .item-pending
        text-transform uppercase
        color          var(--dodgerBlue)
        font-size      .75rem
        font-weight    bold
        line-height    2rem

+medium-screen()
    // we need to cover the border-bottom of the cozy-bar
    $coz-bar-border-size = .0625rem

    .upload-queue
        border-radius 0
        border 0
        background-color var(--white)
        box-shadow none
        width 100%
        max-width 100%
        height auto
        transform none


    .upload-queue-header
        background 0
        color var(--dodgerBlue)
        text-transform uppercase

    .upload-queue-content
        display none

    .upload-queue--popover
        top $coz-bar-size
        bottom auto
        right 0
        left 0
        z-index $app-index + 3
        max-height 0

        &:before
            position fixed
            top $coz-bar-size - $coz-bar-border-size
            z-index  $nav-index
            width 100%
            height $coz-bar-border-size
            content ''
            background var(--white)

        &.upload-queue--visible
            max-height 30%

        .upload-queue-content
            display none

